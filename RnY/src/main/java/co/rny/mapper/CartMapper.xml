<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.rny.mapper.CartMapper">

    <!-- 장바구니 리스트를 조회하는 쿼리 -->
    <select id="selectCartList" parameterType="string" resultType="co.rny.vo.CartVO">
        SELECT c.cart_no,
               c.item_no,
               c.user_no,
               i.item_name,
               i.item_price,
               i.item_image
        FROM tbl_cart c
        JOIN tbl_item i
        ON c.item_no = i.item_no
        WHERE c.user_no = #{userNo}
    </select>

    <!-- 장바구니 항목을 삽입하는 쿼리 -->
    <insert id="insertCart" parameterType="co.rny.vo.CartVO">
        INSERT INTO tbl_cart (cart_no, item_no, user_no, cart_quantity)
        VALUES (cart_seq.NEXTVAL, #{itemNo}, #{userNo}, #{cartQuantity})
    </insert>

    <!-- 장바구니 항목을 삭제하는 쿼리 -->
    <delete id="deleteCart" parameterType="int">
        DELETE FROM tbl_cart
        WHERE cart_no = #{cartNo}
    </delete>

    <!-- 장바구니 항목을 업데이트하는 쿼리 -->
    <update id="updateCartQuantity" parameterType="co.rny.vo.CartVO">
        UPDATE tbl_cart
        SET cart_quantity = #{cartQuantity}
        WHERE cart_no = #{cartNo}
    </update>

</mapper>